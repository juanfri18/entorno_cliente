<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chuletario JS: Unidad 3 + Tiempo</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f2f5; color: #333; max-width: 900px; margin: 0 auto; padding: 20px; }
        h1 { text-align: center; color: #2c3e50; text-transform: uppercase; letter-spacing: 2px; }
        .intro { text-align: center; background: #fff3cd; padding: 10px; border-radius: 5px; border: 1px solid #ffeeba; margin-bottom: 20px; }
        
        /* Estilo de las tarjetas */
        .card { background: white; padding: 20px; margin-bottom: 25px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-left: 6px solid #3498db; }
        .card.time { border-left-color: #e74c3c; } /* Rojo para tiempo */
        .card.storage { border-left-color: #f1c40f; } /* Amarillo para datos */
        
        h2 { margin-top: 0; color: #2980b9; font-size: 1.4em; border-bottom: 1px solid #eee; padding-bottom: 8px; }
        .card.time h2 { color: #c0392b; }
        
        /* Estilo del c√≥digo */
        pre { background: #282c34; color: #abb2bf; padding: 15px; border-radius: 6px; overflow-x: auto; font-size: 0.95em; line-height: 1.4; border: 1px solid #ddd; }
        code { font-family: 'Consolas', monospace; }
        
        /* Comentarios en el c√≥digo para que destaquen */
        .comentario { color: #98c379; font-style: italic; }
        .palabra-clave { color: #c678dd; }
        .funcion { color: #61afef; }
    </style>
</head>
<body>

    <h1>‚ö° Chuletario Completo JS ‚ö°</h1>
    <div class="intro">
        üí° <strong>TRUCO:</strong> Abre la consola (F12) para ver los ejemplos ejecut√°ndose en vivo.
    </div>

    <!-- 1. MANEJO DEL TIEMPO (NUEVO) -->
    <div class="card time">
        <h2>1. Control del Tiempo (Timers) ‚è±Ô∏è</h2>
        <p>Vital para cron√≥metros, relojes y retardos.</p>
        <pre>
// A. ESPERAR (Timeout) -> Ejecuta 1 vez tras esperar
let idTimeout = setTimeout(() => {
    console.log("¬°Han pasado 3 segundos!");
}, 3000);

// CANCELAR espera (antes de que ocurra)
clearTimeout(idTimeout);

// B. REPETIR (Interval) -> Repite infinitamente
let cuenta = 0;
let idInterval = setInterval(() => {
    cuenta++;
    console.log("Segundos: " + cuenta);
}, 1000); // 1000ms = 1 segundo

// PARAR repetici√≥n
clearInterval(idInterval);

// C. CARGAR AL INICIO (Para cron√≥metros autom√°ticos)
window.onload = function() {
    console.log("P√°gina cargada, iniciamos...");
};</pre>
    </div>

    <!-- 2. RELOJES Y FECHAS -->
    <div class="card time">
        <h2>2. Fechas y Reloj Digital üìÖ</h2>
        <p>Obtener hora actual y calcular diferencias.</p>
        <pre>
let ahora = new Date();

// SACAR HORA (Reloj Digital)
let horas = ahora.getHours();
let mins = ahora.getMinutes();
// Truco: padStart(2, "0") pone un 0 delante si es menor de 10
let segs = ahora.getSeconds().toString().padStart(2, "0");
console.log(`${horas}:${mins}:${segs}`);

// CALCULAR D√çAS RESTANTES
let fechaFutura = new Date("2025-12-25");
let diferenciaMS = fechaFutura.getTime() - ahora.getTime();
// F√≥rmula: ms / (1000 * 60 * 60 * 24)
let dias = Math.ceil(diferenciaMS / (1000 * 3600 * 24));</pre>
    </div>

    <!-- 3. COOKIES -->
    <div class="card storage">
        <h2>3. Cookies üç™</h2>
        <p>Caducidad + Formato UTC + Encoding.</p>
        <pre>
// A. GUARDAR (Crear fecha futura)
let fecha = new Date();
fecha.setTime(fecha.getTime() + (5 * 24 * 60 * 60 * 1000)); // +5 d√≠as

// Importante: toUTCString() y encodeURIComponent()
let expira = "expires=" + fecha.toUTCString();
document.cookie = "user=" + encodeURIComponent("Ana") + "; " + expira + "; path=/";

// B. LEER (Trocear el string)
let arrayCookies = document.cookie.split(";");
// Recorrer buscando .startsWith("user=")...</pre>
    </div>

    <!-- 4. STORAGE & JSON -->
    <div class="card storage">
        <h2>4. Storage & JSON üì¶</h2>
        <p>Solo aceptan TEXTO. Usa JSON para guardar Arrays/Objetos.</p>
        <pre>
// localStorage (Eterno) | sessionStorage (Se borra al cerrar)

let datos = [{id: 1, item: "PC"}];

// GUARDAR (Empaquetar: Objeto -> Texto)
let texto = JSON.stringify(datos);
localStorage.setItem("miCarrito", texto);

// LEER (Desempaquetar: Texto -> Objeto)
let recuperado = localStorage.getItem("miCarrito");
if(recuperado) {
    let objetoOriginal = JSON.parse(recuperado);
}</pre>
    </div>

    <!-- 5. ARRAYS (M√âTODOS TOP) -->
    <div class="card">
        <h2>5. Arrays (Listas) üìä</h2>
        <p>M√©todos imprescindibles. Recuerda las funciones flecha <code>=></code>.</p>
        <pre>
let precios = [10, 50, 5, 20];

// .map (Transformar) -> Misma cantidad
let conIVA = precios.map(p => p * 1.21);

// .filter (Filtrar) -> Cantidad variable
let caros = precios.filter(p => p > 15); // [50, 20]

// .find (Buscar uno) -> Devuelve el dato o undefined
let ganga = precios.find(p => p === 5); // 5

// .sort (Ordenar) ¬°OJO! Modifica original
// a - b (Ascendente) | b - a (Descendente)
precios.sort((a, b) => a - b); // [5, 10, 20, 50]

// EXTRAS:
// .forEach((e, i) => ...) -> Bucle simple
// .findLast(...) -> Busca desde el final</pre>
    </div>

    <!-- 6. STRINGS (TEXTO) -->
    <div class="card">
        <h2>6. Strings (Texto) üî§</h2>
        <p>Limpieza y Comparaci√≥n.</p>
        <pre>
let input = "  Hola Mundo  ";

// NORMALIZAR (Espacios fuera + Min√∫sculas)
let limpio = input.trim().toLowerCase(); 

// COMPROBACIONES
limpio.includes("mundo"); // true
limpio.startsWith("hola"); // true
limpio.substring(5); // "mundo" (Corta desde pos 5)

// ORDENAR TEXTO (Respetando tildes y √±)
let nombres = ["√Ålvaro", "Zoe"];
nombres.sort((a, b) => a.localeCompare(b, "es"));</pre>
    </div>

    <!-- 7. MAP -->
    <div class="card">
        <h2>7. Map (Diccionario) üó∫Ô∏è</h2>
        <p>Clave √∫nica -> Valor. Mejor que objetos para b√∫squedas.</p>
        <pre>
let inventario = new Map();

// Guardar / Actualizar
inventario.set("Monitor", 150);

// Leer
let valor = inventario.get("Monitor"); // 150

// Comprobar existencia
if(inventario.has("Monitor")) { ... }

// Recorrer
for(let clave of inventario.keys()) { ... }</pre>
    </div>

    <!-- 8. OBJETOS -->
    <div class="card">
        <h2>8. Objetos y Acceso üîß</h2>
        <pre>
let alumno = { nombre: "Juan", "nota final": 8 };

// A. Notaci√≥n de punto (Lo normal)
console.log(alumno.nombre);

// B. Notaci√≥n Corchetes (Para espacios o variables)
console.log(alumno["nota final"]); // Obligatorio por el espacio

let campo = "nombre";
console.log(alumno[campo]); // Din√°mico</pre>
    </div>

    <!-- SCRIPT DE EJECUCI√ìN -->
    <script>
        console.group("‚ö° EJEMPLOS EN VIVO ‚ö°");
        
        console.log("--- 1. TIEMPO ---");
        console.log("Iniciando cuenta atr√°s de 3 segundos en consola...");
        setTimeout(() => console.log("‚úÖ ¬°Pasaron 3 seg! (Timeout ejecutado)"), 3000);

        console.log("--- 2. ARRAYS ---");
        let nums = [100, 5, 20];
        console.log("Original:", nums);
        console.log("Filtrados > 10:", nums.filter(n => n > 10));
        console.log("Ordenados:", [...nums].sort((a,b)=>a-b));

        console.log("--- 3. STORAGE ---");
        localStorage.setItem("test_chuleta", "Funciona OK");
        console.log("Le√≠do del Storage:", localStorage.getItem("test_chuleta"));

        console.log("--- 4. RELOJ ---");
        let d = new Date();
        console.log(`Hora actual cargada: ${d.getHours()}:${d.getMinutes()}`);

        console.groupEnd();
    </script>
</body>
</html>